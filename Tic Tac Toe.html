<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<title>Tic Tac Toe</title>
		
		<style>
			body {
			  background-color: white;
			}

			#x { display: none; }
			#o { display: none; }

			p {
			    font-size: 20px;
			    font-family: sans-serif;
			}

			#choose-x {
			    font-size: 50px;
			    font-family: sans-serif;
			}

			#choose-o {
			    font-size: 50px;
			    font-family: sans-serif;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas" width=400 height=400></canvas>
		
		<img id="x" src="https://s16.postimg.org/hm4jwg9kl/image.png" width="90">
		<img id="o" src="https://s8.postimg.org/eaq56smf9/image.png" width="90">
		
		<p id="msg">Hello! Welcome to Tic Tac Toe! Player 1 choose your letter:</p>
		
		<button id="choose-x" onclick="choiceX()">X</button>
		<button id="choose-o" onclick="choiceO()">O</button>
		
		<script>
			var canvas = document.getElementById("canvas")
			var ctx = canvas.getContext("2d")
			var xImage = document.getElementById("x")
			var oImage = document.getElementById("o")
			var msg = document.getElementById("msg")
			
			var board = []
			for (var y = 0; y < 4; y++) {
				var row = []
				for (var x = 0; x < 4; x++) {
					row.push(null)
				}
				board.push(row);
			}
		
			player1 = ""
			player2 = ""
			turn = 1
			var imageForPlayer = {
				x: xImage,
				o: oImage,
			}

			function drawBoard() {
				ctx.clearRect(0, 0, canvas.width, canvas.height)
				
				// Make grid lines
				for (i = 1; i < 4; i++) {
				  	ctx.beginPath();
					ctx.moveTo(100*i, 0)
					ctx.lineTo(100*i, 500)
					ctx.stroke()
			    }
				for (i = 1; i < 4; i++) {
				  	ctx.beginPath();
					ctx.moveTo(0, 100*i)
					ctx.lineTo(500, 100*i)
					ctx.stroke()
			    }
			    for (var y = 0; y < 4; y++) {
			    	for (var x = 0; x < 4; x++) {
			    		if (board[y][x] != null) {
			    			ctx.drawImage(imageForPlayer[board[y][x]], x * 100 + 5, y * 100 + 5, 90, 90);
			    		}
			    	}
			    }
			}
			
			/*function detectWin() {
				for (var i = 0; i < 2; i++) {
					if (i === 0) {
						player = player1
					} else {
						player = player2
					}
					
					// Check top left to bottom right diagonal
					for (i = 0; i < 4; i++) {
						if board[i][i] === player
						numFilled += 1
					}
				}
			}*/

			function choiceX() {
				// Set player 1 to X and player 2 to Y
			    msg.innerHTML = "Player 1 make your move"
			    
			    player1 = "x"
			    player2 = "o"
			    
			    document.getElementById("choose-x").style.display = "none"
			    document.getElementById("choose-o").style.display = "none"
			}

			function choiceO() {
				// Set player 1 to Y and player 2 to X
			    msg.innerHTML = "Player 1 make your move"
			    
			    player1 = "o"
			    player2 = "x"
			    
			    document.getElementById("choose-x").style.display = "none"
			    document.getElementById("choose-o").style.display = "none"
			}

			drawBoard()
			
			canvas.onclick = function(event) {
				boxX = parseInt(event.clientX/100)
				boxY = parseInt(event.clientY/100)
				
				if (board[boxY][boxX] === null) {
					if (turn === 1) {
						msg.innerHTML = "Player 2 make your move"
						board[boxY][boxX] = player1
						turn = 2
					} else {
						msg.innerHTML = "Player 1 make your move"
						board[boxY][boxX] = player2
						turn = 1
					}
				}
				
				drawBoard()
				
				/*winner = detectWin()
				
				if (winner === "player1") {
					msg.innerHTML = "Player 1, you won!"
				} else if (winner === "player2) {
					msg.innerHTML = "Player 2, you won!"
				}*/
			}
			
			/*
			- initially draw the board, make the buttons etc.
			- setup an onclick on the canvas
			
			> when the user clicks
				- figure out what box it's in
				- if the box is empty, but the symbol in the box
				- redraw the board
				- if someone has won, end the game
				- switch the active player
			*/
		</script>
	</body>
</html>